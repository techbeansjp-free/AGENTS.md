# AGENTS 規約とテンプレート徹底レビュー

**レビュー実施日**: 2025 年 12 月 7 日 13:48:08  
**レビュー対象**: ObsidianVault 内の AGENTS 関連ドキュメントとテンプレート全体  
**レビュー担当者**: AI エージェント  
**レビュー基準**: [`AGENTS_REVIEW_RULE.md`](../AGENTS_REVIEW_RULE.md)

---

## レビュー概要

### レビュー目的

ObsidianVault 内の AGENTS 関連ドキュメント（`AGENTS.md`、`AGENTS_AI_PLAYBOOK.md`、`AGENTS_REVIEW_RULE.md`、`AGENTS_TEST_GUIDELINES.md`）とテンプレートファイル（`.workflow/templates/`配下の全テンプレート）について、徹底的な品質調査を実施しました。

### レビュー対象ファイル

#### 規約ドキュメント

1. [`AGENTS.md`](../AGENTS.md) - 開発規約の完全版
2. [`AGENTS_AI_PLAYBOOK.md`](../AGENTS_AI_PLAYBOOK.md) - AI エージェント向けの実行ルール
3. [`AGENTS_REVIEW_RULE.md`](../AGENTS_REVIEW_RULE.md) - レビュー時の徹底的な品質調査ルール
4. [`AGENTS_TEST_GUIDELINES.md`](../AGENTS_TEST_GUIDELINES.md) - テスト作成ガイドライン

#### テンプレートファイル

1. [`.workflow/templates/00_システム理解.md`](../.workflow/templates/00_システム理解.md)
2. [`.workflow/templates/00_要求定義.md`](../.workflow/templates/00_要求定義.md)
3. [`.workflow/templates/01_要件定義.md`](../.workflow/templates/01_要件定義.md)
4. [`.workflow/templates/02_設計.md`](../.workflow/templates/02_設計.md)
5. [`.workflow/templates/03_実装計画.md`](../.workflow/templates/03_実装計画.md)
6. [`.workflow/templates/04_review.md`](../.workflow/templates/04_review.md)
7. [`.workflow/templates/05_最終確認チェックリスト.md`](../.workflow/templates/05_最終確認チェックリスト.md)
8. [`.workflow/templates/90_issues.md`](../.workflow/templates/90_issues.md)
9. [`.workflow/templates/99_PR.md`](../.workflow/templates/99_PR.md)

---

## レビュー結果サマリー

### ✅ 良好な点

1. **参照関係の適切な設定**: `AGENTS_REVIEW_RULE.md`と`AGENTS_TEST_GUIDELINES.md`への参照が適切に設定されている
2. **テンプレートへのテスト戦略・テスト観点の追加**: `02_設計.md`と`03_実装計画.md`にテスト戦略・テスト観点セクションが適切に追加されている
3. **日時プレフィックスの一貫性**: `YYYYMMDD_HHMMSS_`形式の日時プレフィックスが一貫して使用されている
4. **ディレクトリ名の一貫性**: `.workflow/`ディレクトリ名が一貫して使用されている（ObsidianVault 内では`.workflow/`が正しい）
5. **ドキュメント間の整合性**: 各ドキュメント間の参照関係が適切に設定されている

### ⚠️ 改善が必要な点

1. **`04_review.md`テンプレートへの`AGENTS_REVIEW_RULE.md`参照の不足**: テンプレートに`AGENTS_REVIEW_RULE.md`への参照が含まれていない
2. **`AGENTS.md`の最終更新日の不一致**: 最終更新日が「2025 年 12 月 6 日」となっているが、`AGENTS_REVIEW_RULE.md`と`AGENTS_TEST_GUIDELINES.md`への参照が追加されているため、更新が必要

---

## 詳細レビュー結果

### 1. 規約ドキュメントのレビュー

#### 1.1 `AGENTS.md`

##### ✅ 良好な点

- **`AGENTS_REVIEW_RULE.md`への参照**: 冒頭に適切な参照が追加されている
- **`AGENTS_TEST_GUIDELINES.md`への参照**: 設計フェーズと実装計画フェーズで適切に参照されている
- **日時プレフィックスの説明**: `YYYYMMDD_HHMMSS_`形式の説明が明確
- **ディレクトリ名の一貫性**: `.workflow/`ディレクトリ名が一貫して使用されている
- **テンプレートファイルへの参照**: テンプレートファイルへの参照が適切に設定されている（`.cursor_workflow/templates/`または`.workflow/templates/`の両方に対応）

##### ✅ 確認事項

- **最終更新日の更新**: 最終更新日が「2025 年 12 月 7 日（レビュー時の徹底的な品質調査ルールを追加、テストガイドラインを追加）」に更新されている ✅（2025 年 12 月 7 日 13:48:08 に対応完了）

#### 1.2 `AGENTS_AI_PLAYBOOK.md`

##### ✅ 良好な点

- **`AGENTS_REVIEW_RULE.md`への参照**: 冒頭とレビューフェーズで適切に参照されている
- **`AGENTS_TEST_GUIDELINES.md`への参照**: 設計フェーズ、実装計画フェーズ、実装フェーズで適切に参照されている
- **レビューフェーズの詳細化**: レビューフェーズで徹底的な品質調査の手順が詳細に記載されている
- **禁止事項の明示**: レビュー時の禁止事項が明確に記載されている

##### ✅ 確認事項

- すべての参照関係が適切に設定されている ✅
- レビューフェーズの説明が詳細で理解しやすい ✅
- テスト作成時の参照が適切に設定されている ✅

#### 1.3 `AGENTS_REVIEW_RULE.md`

##### ✅ 良好な点

- **徹底的な品質調査ルール**: プロジェクト全体の徹底的な品質調査ルールが詳細に記載されている
- **参照関係**: `AGENTS.md`、`AGENTS_AI_PLAYBOOK.md`、`AGENTS_TEST_GUIDELINES.md`への適切な参照が含まれている
- **チェックリスト**: レビュー実施時のチェックリストが詳細に記載されている
- **禁止事項の明示**: レビュー時の禁止事項が明確に記載されている

##### ✅ 確認事項

- すべての参照関係が適切に設定されている ✅
- チェックリストが詳細で実用的 ✅
- 禁止事項が明確に記載されている ✅

#### 1.4 `AGENTS_TEST_GUIDELINES.md`

##### ✅ 良好な点

- **テスト作成ガイドライン**: テスト作成時のガイドラインが詳細に記載されている
- **参照関係**: `AGENTS.md`、`AGENTS_AI_PLAYBOOK.md`、`AGENTS_REVIEW_RULE.md`への適切な参照が含まれている
- **正常系・異常系の配分**: 正常系は最小限、異常系・境界値に重点を置く方針が明確
- **バリデーション系のテスト**: バリデーション系のテストが網羅的に実施される方針が明確

##### ✅ 確認事項

- すべての参照関係が適切に設定されている ✅
- テスト観点が詳細で実用的 ✅
- 正常系・異常系の配分が明確 ✅

---

### 2. テンプレートファイルのレビュー

#### 2.1 `00_システム理解.md`テンプレート

##### ✅ 良好な点

- **セクション構造**: セクション構造が適切で、必須項目が明確
- **Mermaid 図の使用**: アーキテクチャ図やリレーション図が適切に使用されている
- **参考資料セクション**: 既存ドキュメントへのリンクが適切に設定されている

##### ✅ 確認事項

- セクション構造が適切 ✅
- Mermaid 図が適切に使用されている ✅
- 参考資料セクションが適切 ✅

#### 2.2 `00_要求定義.md`テンプレート

##### ✅ 良好な点

- **セクション構造**: セクション構造が適切で、必須項目が明確
- **Mermaid 図の使用**: マインドマップやフローチャートが適切に使用されている
- **次のステップセクション**: `01_要件定義.md`への適切なリンクが含まれている
- **参考資料セクション**: `00_システム理解.md`への適切な参照が含まれている

##### ✅ 確認事項

- セクション構造が適切 ✅
- Mermaid 図が適切に使用されている ✅
- 次のステップセクションが適切 ✅

#### 2.3 `01_要件定義.md`テンプレート

##### ✅ 良好な点

- **セクション構造**: セクション構造が適切で、必須項目が明確
- **BDD ユースケース**: Gherkin 形式のシナリオが適切に使用されている
- **Mermaid 図の使用**: シーケンス図が適切に使用されている
- **前のステップ・次のステップセクション**: 適切なリンクが含まれている

##### ✅ 確認事項

- セクション構造が適切 ✅
- BDD ユースケースが適切に使用されている ✅
- 前のステップ・次のステップセクションが適切 ✅

#### 2.4 `02_設計.md`テンプレート

##### ✅ 良好な点

- **テスト戦略セクション**: テスト戦略セクション（6. テスト戦略）が適切に追加されている
- **`AGENTS_TEST_GUIDELINES.md`への参照**: テスト戦略セクションで適切に参照されている
- **Mermaid 図の使用**: アーキテクチャ図、データフロー図、リレーション図が適切に使用されている
- **セクション番号の整合性**: セクション番号が適切に調整されている（6. テスト戦略追加後、7→8→9→10→11→12）

##### ✅ 確認事項

- テスト戦略セクションが適切に追加されている ✅
- `AGENTS_TEST_GUIDELINES.md`への参照が適切 ✅
- セクション番号が適切に調整されている ✅

#### 2.5 `03_実装計画.md`テンプレート

##### ✅ 良好な点

- **テスト観点セクション**: 各タスクのテスト観点セクション（2.1.3 テスト観点）が適切に追加されている
- **テスト計画セクション**: テスト計画セクション（4. テスト計画）が適切に更新されている
- **`AGENTS_TEST_GUIDELINES.md`への参照**: テスト観点セクションとテスト計画セクションで適切に参照されている
- **セクション番号の整合性**: セクション番号が適切に調整されている（2.1.3 テスト観点追加後、2.1.4→2.1.5→2.1.6）

##### ✅ 確認事項

- テスト観点セクションが適切に追加されている ✅
- `AGENTS_TEST_GUIDELINES.md`への参照が適切 ✅
- セクション番号が適切に調整されている ✅

#### 2.6 `04_review.md`テンプレート

##### ✅ 良好な点

- **セクション構造**: セクション構造が適切で、必須項目が明確
- **前のステップセクション**: `03_実装計画.md`への適切なリンクが含まれている

##### ✅ 確認事項

- **`AGENTS_REVIEW_RULE.md`への参照**: テンプレートの冒頭に`AGENTS_REVIEW_RULE.md`への参照が追加されている ✅（2025 年 12 月 7 日 13:48:08 に対応完了）

#### 2.7 `05_最終確認チェックリスト.md`テンプレート

##### ✅ 良好な点

- **セクション構造**: セクション構造が適切で、必須項目が明確
- **参考資料セクション**: プロジェクトドキュメントへの適切なリンクが含まれている

##### ✅ 確認事項

- セクション構造が適切 ✅
- 参考資料セクションが適切 ✅

#### 2.8 `90_issues.md`テンプレート

##### ✅ 良好な点

- **セクション構造**: セクション構造が適切で、必須項目が明確
- **参考資料セクション**: 親 issue/タスクのドキュメントへの適切なリンクが含まれている
- **Mermaid 図の使用**: 依存関係図や進捗状況図が適切に使用されている

##### ✅ 確認事項

- セクション構造が適切 ✅
- 参考資料セクションが適切 ✅

#### 2.9 `99_PR.md`テンプレート

##### ✅ 良好な点

- **セクション構造**: セクション構造が適切で、必須項目が明確
- **Mermaid 図の使用**: クラス図、シーケンス図、ワークフロー図、ER 図が適切に使用されている
- **テストセクション**: TDD と BDD のテストセクションが適切に設定されている

##### ✅ 確認事項

- セクション構造が適切 ✅
- Mermaid 図が適切に使用されている ✅

---

### 3. 整合性チェック

#### 3.1 参照関係の整合性

| ドキュメント                 | 参照先                      | 整合性                                                |
| ---------------------------- | --------------------------- | ----------------------------------------------------- |
| `AGENTS.md`                  | `AGENTS_REVIEW_RULE.md`     | ✅ 適切（冒頭に参照）                                 |
| `AGENTS.md`                  | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切（設計・実装計画フェーズで参照）               |
| `AGENTS_AI_PLAYBOOK.md`      | `AGENTS_REVIEW_RULE.md`     | ✅ 適切（冒頭とレビューフェーズで参照）               |
| `AGENTS_AI_PLAYBOOK.md`      | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切（設計・実装計画・実装フェーズで参照）         |
| `AGENTS_REVIEW_RULE.md`      | `AGENTS.md`                 | ✅ 適切（参考資料セクションで参照）                   |
| `AGENTS_REVIEW_RULE.md`      | `AGENTS_AI_PLAYBOOK.md`     | ✅ 適切（参考資料セクションで参照）                   |
| `AGENTS_REVIEW_RULE.md`      | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切（参考資料セクションで参照）                   |
| `AGENTS_TEST_GUIDELINES.md`  | `AGENTS.md`                 | ✅ 適切（参考資料セクションで参照）                   |
| `AGENTS_TEST_GUIDELINES.md`  | `AGENTS_AI_PLAYBOOK.md`     | ✅ 適切（参考資料セクションで参照）                   |
| `AGENTS_TEST_GUIDELINES.md`  | `AGENTS_REVIEW_RULE.md`     | ✅ 適切（参考資料セクションで参照）                   |
| `02_設計.md`テンプレート     | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切（テスト戦略セクションで参照）                 |
| `03_実装計画.md`テンプレート | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切（テスト観点・テスト計画セクションで参照）     |
| `04_review.md`テンプレート   | `AGENTS_REVIEW_RULE.md`     | ✅ **適切**（2025 年 12 月 7 日 13:48:08 に対応完了） |

#### 3.2 ディレクトリ名の整合性

| ドキュメント            | ディレクトリ名         | 整合性                                                                  |
| ----------------------- | ---------------------- | ----------------------------------------------------------------------- |
| `AGENTS.md`             | `.workflow/`           | ✅ 適切（ObsidianVault 内では`.workflow/`が正しい）                     |
| `AGENTS_AI_PLAYBOOK.md` | `.workflow/`           | ✅ 適切（ObsidianVault 内では`.workflow/`が正しい）                     |
| `AGENTS_REVIEW_RULE.md` | `.workflow/templates/` | ✅ 適切（相対パスが正しい）                                             |
| テンプレートファイル    | `.workflow/templates/` | ✅ 適切（すべてのテンプレートが`.workflow/templates/`に配置されている） |

**注意**: `AGENTS.md`では、実際のプロジェクトでは`.cursor_workflow/templates/`または`.workflow/templates/`の両方に対応する旨が記載されているが、ObsidianVault 内では`.workflow/`が正しい。

#### 3.3 日時プレフィックスの整合性

| ドキュメント            | 日時プレフィックス形式 | 整合性                                                    |
| ----------------------- | ---------------------- | --------------------------------------------------------- |
| `AGENTS.md`             | `YYYYMMDD_HHMMSS_`     | ✅ 適切（一貫して`YYYYMMDD_HHMMSS_`形式が使用されている） |
| `AGENTS_AI_PLAYBOOK.md` | `YYYYMMDD_HHMMSS_`     | ✅ 適切（一貫して`YYYYMMDD_HHMMSS_`形式が使用されている） |
| メモファイルの命名規則  | `YYYYMMDD_HHMMSS_`     | ✅ 適切（一貫して`YYYYMMDD_HHMMSS_`形式が使用されている） |

**確認事項**:

- `YYYYMMDD_`形式（日付のみ）の使用は禁止されている ✅
- 日時プレフィックスなしの使用は禁止されている ✅
- すべてのドキュメントで`YYYYMMDD_HHMMSS_`形式が一貫して使用されている ✅

#### 3.4 テンプレートとガイドラインドキュメントの整合性

| 項目                         | テンプレート                        | ガイドライン                | 整合性                                                |
| ---------------------------- | ----------------------------------- | --------------------------- | ----------------------------------------------------- |
| テスト戦略の定義             | `02_設計.md` 6. テスト戦略          | `AGENTS.md` 3. 設計         | ✅ 適切                                               |
| テスト観点の定義             | `03_実装計画.md` 2.1.3 テスト観点   | `AGENTS.md` 4. 実装計画     | ✅ 適切                                               |
| 正常系・異常系の配分         | 両テンプレート                      | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切                                               |
| バリデーション系のテスト     | 両テンプレート                      | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切                                               |
| 参照関係                     | `AGENTS_TEST_GUIDELINES.md`への参照 | 各ガイドライン              | ✅ 適切                                               |
| レビュー時の徹底的な品質調査 | `04_review.md`テンプレート          | `AGENTS_REVIEW_RULE.md`     | ✅ **適切**（2025 年 12 月 7 日 13:48:08 に対応完了） |

---

### 4. 指摘事項

#### 指摘 1: `04_review.md`テンプレートへの`AGENTS_REVIEW_RULE.md`参照の不足

- **重要度**: 中
- **指摘内容**: `04_review.md`テンプレートの冒頭に、`AGENTS_REVIEW_RULE.md`への参照が含まれていない。他のテンプレート（`02_設計.md`、`03_実装計画.md`）では`AGENTS_TEST_GUIDELINES.md`への参照が含まれているが、`04_review.md`テンプレートでは`AGENTS_REVIEW_RULE.md`への参照が含まれていない。
- **対応状況**: ✅ **完了**（2025 年 12 月 7 日 13:48:08 に対応）
- **対応方法**: `04_review.md`テンプレートの冒頭（「重要」セクション内）に、以下のような参照を追加した：
  ```markdown
  > **必須**: **レビュー実施時は、[`AGENTS_REVIEW_RULE.md`](../../AGENTS_REVIEW_RULE.md) を必ず参照してください**。関連するテストやコードだけでなく、**プロジェクト全体のすべてのテストやコードを徹底的に調査する**ことが必須です。
  ```
- **影響範囲**: レビューフェーズで`04_review.md`テンプレートを使用する際に、`AGENTS_REVIEW_RULE.md`の存在を認識できない可能性があった（対応により解消）

#### 指摘 2: `AGENTS.md`の最終更新日の不一致

- **重要度**: 低
- **指摘内容**: `AGENTS.md`の最終更新日が「2025 年 12 月 6 日」となっているが、`AGENTS_REVIEW_RULE.md`と`AGENTS_TEST_GUIDELINES.md`への参照が追加されているため、更新が必要。
- **対応状況**: ✅ **完了**（2025 年 12 月 7 日 13:48:08 に対応）
- **対応方法**: 最終更新日を「2025 年 12 月 7 日（レビュー時の徹底的な品質調査ルールを追加、テストガイドラインを追加）」に更新した
- **影響範囲**: ドキュメントの更新履歴の正確性（対応により解消）

---

## 総合評価

### 評価サマリー

- **整合性**: ✅ テンプレートとガイドラインドキュメントの整合性が保たれている
- **完全性**: ✅ すべての要件が適切に満たされている
- **一貫性**: ✅ テンプレート間で一貫した形式と内容が保たれている
- **実用性**: ✅ AI エージェントが迷わず作業できる実用的なテンプレートになっている
- **明確性**: ✅ 記述例が具体的で、理解しやすい

### 優先度別の対応項目

#### 🟢 完了（すべての要件が満たされている）

1. ✅ **`04_review.md`テンプレートへの`AGENTS_REVIEW_RULE.md`参照の追加**: レビューフェーズで`AGENTS_REVIEW_RULE.md`を参照できるようにするため、テンプレートの冒頭に参照を追加（2025 年 12 月 7 日 13:48:08 に対応完了）
2. ✅ **`AGENTS.md`の最終更新日の更新**: ドキュメントの更新履歴の正確性を保つため、最終更新日を更新（2025 年 12 月 7 日 13:48:08 に対応完了）

---

## 推奨される今後の運用

### 1. テンプレートの使用

- AI エージェントは、新しい issue/タスクを開始する際、必ずこれらのテンプレートを使用する
- テンプレートの記述例を参考に、適切な内容を記載する
- レビューフェーズでは、`AGENTS_REVIEW_RULE.md`を必ず参照する

### 2. テンプレートの更新

- 規約やガイドラインに関する方針が変更された場合は、テンプレートも更新する
- テンプレートの更新時は、セクション番号の整合性を確認する
- テンプレートの更新時は、関連するガイドラインドキュメントへの参照を確認する

### 3. レビューの実施

- テンプレートを使用して作成されたドキュメントは、規約に準拠しているかレビューする
- レビューフェーズでは、`AGENTS_REVIEW_RULE.md`に従って徹底的な品質調査を実施する

---

## 参考資料

### レビュー対象ファイル

#### 規約ドキュメント

- [`AGENTS.md`](../AGENTS.md)
- [`AGENTS_AI_PLAYBOOK.md`](../AGENTS_AI_PLAYBOOK.md)
- [`AGENTS_REVIEW_RULE.md`](../AGENTS_REVIEW_RULE.md)
- [`AGENTS_TEST_GUIDELINES.md`](../AGENTS_TEST_GUIDELINES.md)

#### テンプレートファイル

- [`.workflow/templates/00_システム理解.md`](../.workflow/templates/00_システム理解.md)
- [`.workflow/templates/00_要求定義.md`](../.workflow/templates/00_要求定義.md)
- [`.workflow/templates/01_要件定義.md`](../.workflow/templates/01_要件定義.md)
- [`.workflow/templates/02_設計.md`](../.workflow/templates/02_設計.md)
- [`.workflow/templates/03_実装計画.md`](../.workflow/templates/03_実装計画.md)
- [`.workflow/templates/04_review.md`](../.workflow/templates/04_review.md)
- [`.workflow/templates/05_最終確認チェックリスト.md`](../.workflow/templates/05_最終確認チェックリスト.md)
- [`.workflow/templates/90_issues.md`](../.workflow/templates/90_issues.md)
- [`.workflow/templates/99_PR.md`](../.workflow/templates/99_PR.md)

### 関連レビュー

- [`20251206_230446_テストガイドライン追加と設計計画フェーズへのテスト観点追加レビュー.md`](./20251206_230446_テストガイドライン追加と設計計画フェーズへのテスト観点追加レビュー.md)
- [`20251206_235730_テンプレートへのテスト戦略とテスト観点追加レビュー.md`](./20251206_235730_テンプレートへのテスト戦略とテスト観点追加レビュー.md)

---

**レビュー実施日**: 2025 年 12 月 7 日 13:48:08  
**レビュー担当者**: AI エージェント
