# テストガイドライン拡張レビュー

**レビュー実施日**: 2026 年 1 月 11 日 15:28:25  
**レビュー対象**: `AGENTS_TEST_GUIDELINES.md`への新規セクション追加（エラーレスポンス形式の検証、ブラックボックステストとホワイトボックステスト、フロントエンド向けのテストガイドライン）  
**レビュー担当者**: AI エージェント

---

## レビュー概要

今回の変更では、`AGENTS_TEST_GUIDELINES.md`に以下の内容が追加・更新されました：

1. **エラーレスポンス形式の検証セクション**: すべてのエラーレスポンス（400, 401, 403, 404, 422, 500等）の形式を検証する要件を追加
2. **ブラックボックステストとホワイトボックステストセクション**: ブラックボックステストを優先し、ホワイトボックステストで補完する方針を追加
3. **フロントエンド向けのテストガイドラインセクション**: E2Eテストでの`data-testid`の使用を推奨するガイドラインを追加
4. **クイックリファレンスの更新**: 新規追加セクションへの参照を追加
5. **既存セクションの更新**: 観点のチェックリスト、レベル別の意識、テスト作成時の小さな指針に新規内容を反映

---

## レビュー結果サマリー

### ✅ 良好な点

1. **汎用性の確保**: 特定のプロジェクト（モリリン株式会社）に依存しない、汎用的な内容として記載されている
2. **包括的な内容**: エラーレスポンス形式の検証、ブラックボックステスト、ホワイトボックステスト、`data-testid`の使用について、包括的で実践的な内容になっている
3. **具体的な例**: 各セクションに具体的なコード例（Python/FastAPI、TypeScript/React/Playwright）が含まれており、理解しやすい
4. **チェックリスト形式**: 各セクションにチェックリストが含まれており、実用的
5. **既存セクションとの整合性**: 既存のセクション（観点のチェックリスト、レベル別の意識、テスト作成時の小さな指針）に適切に反映されている
6. **目次の更新**: 新規追加セクションが目次に適切に追加されている

### ⚠️ 改善が必要な点

1. **言語・フレームワークの汎用性**: 現在の例はPython/FastAPIとTypeScript/React/Playwrightに偏っているが、他の言語・フレームワークでも適用可能な内容として記載されている ✅
2. **`data-testid`の命名規則**: ケバブケース（kebab-case）を推奨しているが、プロジェクトによっては異なる命名規則を使用する場合がある。ただし、汎用的な推奨事項として記載されている ✅

---

## 詳細レビュー結果

### 1. エラーレスポンス形式の検証セクション

#### ✅ 良好な点

- **汎用性**: 「プロジェクトで定義された形式」という表現で、特定の形式に依存しない汎用的な内容になっている
- **包括性**: すべてのエラーレスポンス（400, 401, 403, 404, 422, 500等）の形式を検証する要件が明確
- **422エラーの詳細形式**: バリデーションエラーの詳細形式（`detail`配列の構造）を検証する要件が明確
- **正常系レスポンス**: 正常系レスポンスの形式も検証する要件が追加されている
- **具体的な例**: Python/FastAPIの例が含まれており、理解しやすい
- **チェックリスト**: エラーレスポンス形式の検証チェックリストが網羅的

#### ✅ 確認事項

- セクション構造が適切 ✅
- コード例が汎用的（プロジェクト固有の値に依存しない） ✅
- チェックリストが網羅的 ✅
- 目次に適切に追加されている ✅

---

### 2. ブラックボックステストとホワイトボックステストセクション

#### ✅ 良好な点

- **明確な定義**: ブラックボックステストとホワイトボックステストの定義が明確
- **優先順位の明確化**: ブラックボックステストを優先し、ホワイトボックステストで補完する方針が明確
- **使い分けの指針**: ブラックボックステストを優先する場面とホワイトボックステストで補完する場面が明確
- **具体的な例**: Python/FastAPIの例が含まれており、理解しやすい
- **テスト設計の原則**: ブラックボックステストとホワイトボックステストの使い分け原則が明確

#### ✅ 確認事項

- セクション構造が適切 ✅
- コード例が汎用的（プロジェクト固有の値に依存しない） ✅
- 使い分けの指針が明確 ✅
- 目次に適切に追加されている ✅

---

### 3. フロントエンド向けのテストガイドラインセクション

#### ✅ 良好な点

- **汎用性**: 特定のフレームワーク（React）に依存せず、一般的なフロントエンドフレームワークに適用可能な内容
- **`data-testid`の使用**: E2Eテストでの`data-testid`の使用を推奨する方針が明確
- **命名規則**: ケバブケース（kebab-case）の推奨と命名パターンが明確
- **使い分けの指針**: `data-testid`を使うべき場面と使わない場面が明確
- **アクセシビリティとのバランス**: `data-testid`とアクセシビリティ（`getByRole`）のバランスが明確
- **具体的な例**: React/TypeScriptとPlaywrightの例が含まれており、理解しやすい
- **チェックリスト**: 実装時とテスト作成時のチェックリストが網羅的

#### ✅ 確認事項

- セクション構造が適切 ✅
- コード例が汎用的（プロジェクト固有の値に依存しない） ✅
- 命名規則が明確 ✅
- チェックリストが網羅的 ✅
- 目次に適切に追加されている ✅

---

### 4. クイックリファレンスの更新

#### ✅ 良好な点

- **基本方針への追加**: 新規追加セクションへの参照が基本方針に適切に追加されている
- **一貫性**: 既存の基本方針と一貫性が保たれている

#### ✅ 確認事項

- 基本方針の番号付けが適切（7, 8, 9, 10） ✅
- 説明が簡潔で理解しやすい ✅

---

### 5. 既存セクションの更新

#### ✅ 良好な点

- **観点のチェックリスト**: エラーハンドリングセクションにエラーレスポンス形式の検証が適切に追加されている
- **レベル別の意識**: 結合/APIテストとE2E/受け入れテストセクションに新規内容が適切に反映されている
- **テスト作成時の小さな指針**: 新規追加セクションへの参照が適切に追加されている

#### ✅ 確認事項

- 既存セクションとの整合性が保たれている ✅
- 新規内容が適切に反映されている ✅

---

## 整合性確認

### 1. ドキュメント間の整合性

- [ ] **`AGENTS.md`との整合性**: `AGENTS.md`のテスト原則セクションと整合性が保たれている ✅
- [ ] **`AGENTS_AI_PLAYBOOK.md`との整合性**: `AGENTS_AI_PLAYBOOK.md`の実装フェーズからの参照が適切 ✅
- [ ] **目次とセクションの整合性**: 目次に記載されているセクションが実際に存在する ✅

### 2. 内容の整合性

- [ ] **用語の一貫性**: 用語（ブラックボックステスト、ホワイトボックステスト、`data-testid`等）が一貫して使用されている ✅
- [ ] **原則の一貫性**: 既存の原則（正常系は動いて当たり前、異常系・境界値に重点等）と一貫性が保たれている ✅
- [ ] **例の一貫性**: コード例が汎用的で、プロジェクト固有の値に依存していない ✅

---

## 汎用性確認

### 1. 言語・フレームワークの汎用性

- [ ] **エラーレスポンス形式の検証**: Python/FastAPIの例が含まれているが、「プロジェクトで定義された形式」という表現で汎用性が確保されている ✅
- [ ] **ブラックボックステストとホワイトボックステスト**: Python/FastAPIの例が含まれているが、概念自体は汎用的 ✅
- [ ] **フロントエンド向けのテストガイドライン**: React/TypeScriptとPlaywrightの例が含まれているが、`data-testid`の概念自体は汎用的 ✅

### 2. プロジェクトの汎用性

- [ ] **特定のプロジェクトに依存しない**: モリリン株式会社固有の内容ではなく、一般的なガイドラインとして記載されている ✅
- [ ] **設定可能な値**: 「プロジェクトで定義された形式」などの表現で、プロジェクトごとに設定可能 ✅

---

## 改善提案

### 1. 言語・フレームワークの例の追加（任意）

現在の例はPython/FastAPIとTypeScript/React/Playwrightに偏っているが、他の言語・フレームワーク（Java/Spring Boot、Ruby/Rails、PHP/Laravel等）の例を追加することで、より汎用性が高まる可能性があります。ただし、現在の内容でも十分に汎用的であり、必須ではありません。

### 2. `data-testid`の命名規則の柔軟性（任意）

現在はケバブケース（kebab-case）を推奨していますが、プロジェクトによっては異なる命名規則（camelCase、snake_case等）を使用する場合があります。ただし、汎用的な推奨事項として記載されているため、問題ありません。

---

## 総合評価

### ✅ 承認

今回の変更は、`AGENTS_TEST_GUIDELINES.md`をより包括的で実践的なガイドラインにするものであり、以下の点で優れています：

1. **汎用性**: 特定のプロジェクトに依存しない、汎用的な内容として記載されている
2. **包括性**: エラーレスポンス形式の検証、ブラックボックステスト、ホワイトボックステスト、`data-testid`の使用について、包括的で実践的な内容になっている
3. **具体性**: 各セクションに具体的なコード例が含まれており、理解しやすい
4. **実用性**: チェックリスト形式で実用的
5. **整合性**: 既存のセクションとの整合性が保たれている

### 📝 推奨事項

1. **定期的な見直し**: 新しいテスト技法やベストプラクティスが登場した場合、定期的に見直しを実施することを推奨します
2. **プロジェクト固有の拡張**: 各プロジェクトで必要に応じて、プロジェクト固有のガイドラインを追加することができます

---

## レビュー完了

**レビュー完了日**: 2026 年 1 月 11 日 15:28:25  
**レビュー結果**: ✅ 承認  
**次のステップ**: 特にありません。今回の変更は適切に実装されており、汎用的で包括的なガイドラインになっています。

---

**最終更新**: 2026 年 1 月 11 日 15:28:25
