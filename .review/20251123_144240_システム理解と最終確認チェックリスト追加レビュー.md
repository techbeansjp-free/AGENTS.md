# レビュー結果: システム理解と最終確認チェックリスト追加

**レビュー日**: 2025 年 11 月 23 日 14:42:40  
**レビュー対象**:

- システム理解フェーズ（00\_システム理解.md）の追加
- 最終確認チェックリスト（05\_最終確認チェックリスト.md）の追加
- テンプレートファイル、AGENTS.md、AGENTS_AI_PLAYBOOK.md、README.md  
  **レビュー対象**:
- システム理解フェーズ（00\_システム理解.md）の追加
- 最終確認チェックリスト（05\_最終確認チェックリスト.md）の追加
- テンプレートファイル、AGENTS.md、AGENTS_AI_PLAYBOOK.md、README.md

---

## ✅ 総合評価

**AI が想定通りに正しく機能するか**: **概ね問題なし。いくつかの改善点あり。**

システム理解フェーズと最終確認チェックリストの追加により、ワークフローがより包括的になりました。ただし、いくつかの整合性の問題と改善点があります。

---

## ✅ 良好な点

### 1. システム理解フェーズの追加

- 既存プロジェクトへの導入時に必要なフェーズが明確に定義されている
- テンプレートファイル（`00_システム理解.md`）が適切に作成されている
- AGENTS.md と AGENTS_AI_PLAYBOOK.md で一貫して説明されている
- ワークフローチートシートに適切に反映されている

### 2. 最終確認チェックリストの追加

- コード対応不可項目（外部設定）の管理方法が明確に定義されている
- テンプレートファイル（`05_最終確認チェックリスト.md`）が適切に作成されている
- AGENTS.md と AGENTS_AI_PLAYBOOK.md で一貫して説明されている
- ワークフローチートシートに適切に反映されている

### 3. テンプレートの一貫性

- すべてのテンプレートで同じフォーマットを使用
- 必須セクションが明確に定義されている
- プレースホルダーの形式が統一されている

### 4. ドキュメント間のリンク

- 前のステップ・次のステップセクションが適切に配置
- 参考資料セクションで関連ドキュメントへのリンクが適切

---

## ⚠️ 改善が必要な点

### 1. README.md の更新不足（重要）

**問題**: README.md に以下の情報が不足している：

1. **テンプレートファイル一覧に `00_システム理解.md` と `05_最終確認チェックリスト.md` が記載されていない**
2. **ワークフローチートシートが古い（システム理解と最終確認チェックリストが反映されていない）**
3. **フェーズ説明にシステム理解と最終確認チェックリストが記載されていない**
4. **ディレクトリ構造に `00_システム理解.md` と `05_最終確認チェックリスト.md` が記載されていない**

**現状**:

- README.md のテンプレートファイル一覧: `00_要求定義.md` から `90_issues.md` まで（`00_システム理解.md` と `05_最終確認チェックリスト.md` が欠落）
- README.md のワークフローチートシート: システム理解と最終確認チェックリストが反映されていない
- README.md のフェーズ説明: システム理解と最終確認チェックリストが記載されていない
- README.md のディレクトリ構造: `00_システム理解.md` と `05_最終確認チェックリスト.md` が記載されていない

**評価**:

- README.md はクイックリファレンスとして重要な役割を果たすため、最新の情報を反映する必要がある
- 新規ユーザーが README.md を参照した際に、システム理解と最終確認チェックリストの存在を知ることができない

**対応**: ⚠️ **要対応** - README.md を更新する必要がある

**優先度**: 高

### 2. AGENTS.md の「絶対に守ること」の更新不足（重要）

**問題**: AGENTS.md の「絶対に守ること」セクションに、システム理解フェーズに関する記述が不足している。

**現状**:

```markdown
1. **すべての対応は `.workflow/{YYYYMMDD_issue_name}/00_要求定義.md` から始める**
2. **フェーズを飛ばさない（00 → 01 → 02 → 03 → 実装 → 04_review）**
3. **ドキュメントと実装を常に同期させる（変更したら必ず該当 md を更新）**
```

**評価**:

- 既存プロジェクト導入時は、システム理解フェーズ（`00_システム理解.md`）から開始する必要がある
- ワークフローチートシートには反映されているが、「絶対に守ること」セクションには反映されていない

**対応**: ⚠️ **要対応** - AGENTS.md の「絶対に守ること」セクションを更新する必要がある

**優先度**: 高

### 3. 00\_システム理解.md テンプレートの「前のステップ」「次のステップ」セクション（問題なし）

**確認**: `00_システム理解.md` テンプレートには「前のステップ」「次のステップ」セクションがないが、AGENTS.md で「前のステップ/次のステップセクションは不要（プロジェクト全体の理解のため）」と明記されている。

**評価**: ✅ 問題なし

### 4. 00\_要求定義.md テンプレートの「参考資料」セクション（要確認）

**確認**: `00_要求定義.md` テンプレートの「参考資料」セクションに、既存プロジェクトの場合の `00_システム理解.md` へのリンクが記載されていない。

**現状**:

- `00_要求定義.md` テンプレートの「参考資料」セクションには、`00_システム理解.md` へのリンクがない
- AGENTS.md では「既存プロジェクトの場合は、「参考資料」セクションに [`00_システム理解.md`](../00_システム理解.md) へのリンクを含める」と記載されている

**評価**: ⚠️ **要確認** - テンプレートと AGENTS.md の説明が一致しているか確認が必要

**対応**: ⚠️ **要対応** - `00_要求定義.md` テンプレートの「参考資料」セクションに、既存プロジェクトの場合の `00_システム理解.md` へのリンクを追加する必要がある

**優先度**: 中

### 5. 05\_最終確認チェックリスト.md テンプレートの「前のステップ」「次のステップ」セクション（問題なし）

**確認**: `05_最終確認チェックリスト.md` テンプレートには「前のステップ」「次のステップ」セクションがないが、AGENTS.md で「前のステップ/次のステップセクションは不要（最終確認チェックリストのため）」と明記されている。

**評価**: ✅ 問題なし

### 6. 04_review.md テンプレートの「次のステップ」セクション（要確認）

**確認**: `04_review.md` テンプレートには「次のステップ」セクションがないが、最終確認チェックリストが追加されたため、外部設定が必要な場合は「次のステップ」セクションに `05_最終確認チェックリスト.md` へのリンクを追加する必要がある可能性がある。

**現状**:

- `04_review.md` テンプレートには「次のステップ」セクションがない
- AGENTS.md では「次のステップセクションは不要（レビュー完了後は issue/タスク完了のため、または最終確認フェーズへ）」と記載されている

**評価**: ⚠️ **要確認** - 外部設定が必要な場合は、`04_review.md` から `05_最終確認チェックリスト.md` へのリンクが必要かもしれない

**対応**: ⚠️ **要検討** - 外部設定が必要な場合の `04_review.md` の「次のステップ」セクションの扱いを検討する必要がある

**優先度**: 低（現状でも動作するが、明確性向上のため検討）

---

## 🔍 詳細レビュー

### テンプレートファイルの整合性

#### 00\_システム理解.md

- ✅ タイトル形式: 「システム理解書: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「前のステップ」「次のステップ」セクションなし（プロジェクト全体の理解のため）- 正しい
- ✅ リンク形式: Markdown リンク形式を使用 - 正しい
- ✅ セクション構造: AGENTS.md のテンプレート説明と一致
- ⚠️ 「前のステップ」「次のステップ」セクション: AGENTS.md では「前のステップ/次のステップセクションは不要」と記載されているが、テンプレートには記載がない（コメントとして追加すべき）

#### 00\_要求定義.md

- ✅ タイトル形式: 「要求定義書: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「次のステップ」セクションあり（「前のステップ」は不要）- 正しい
- ✅ リンク形式: Markdown リンク形式を使用 - 正しい
- ⚠️ 「参考資料」セクション: 既存プロジェクトの場合の `00_システム理解.md` へのリンクが記載されていない

#### 01\_要件定義.md

- ✅ タイトル形式: 「要件定義書: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「前のステップ」「次のステップ」セクションあり - 正しい
- ✅ リンク形式: Markdown リンク形式を使用 - 正しい
- ✅ BDD 形式: Gherkin 形式でシナリオを定義 - 正しい

#### 02\_設計.md

- ✅ タイトル形式: 「設計書: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「前のステップ」「次のステップ」セクションあり - 正しい
- ✅ リンク形式: Markdown リンク形式を使用 - 正しい
- ✅ アーキテクチャ図: Mermaid 形式で適切に配置 - 正しい

#### 03\_実装計画.md

- ✅ タイトル形式: 「実装計画書: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「前のステップ」「次のステップ」セクションあり - 正しい
- ✅ リンク形式: Markdown リンク形式を使用 - 正しい
- ✅ BDD テスト仕様: セクションが適切に配置 - 正しい

#### 04_review.md

- ✅ タイトル形式: 「レビュー書: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「前のステップ」セクションあり（「次のステップ」は不要）- 正しい
- ✅ リンク形式: Markdown リンク形式を使用 - 正しい
- ⚠️ 「次のステップ」セクション: 外部設定が必要な場合の `05_最終確認チェックリスト.md` へのリンクを検討する必要がある

#### 05\_最終確認チェックリスト.md

- ✅ タイトル形式: 「最終確認チェックリスト: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「前のステップ」「次のステップ」セクションなし（最終確認チェックリストのため）- 正しい
- ✅ リンク形式: Markdown リンク形式を使用 - 正しい
- ✅ セクション構造: AGENTS.md のテンプレート説明と一致

#### 90_issues.md

- ✅ タイトル形式: 「Issue 一覧: {プロジェクト名}」- 正しい
- ✅ 必須セクション: 「前のステップ」「次のステップ」セクションなし（issue 管理ファイルのため）- 正しい
- ✅ 参考資料: 親 issue/タスクのドキュメントへのリンクあり - 正しい

### AGENTS.md と AGENTS_AI_PLAYBOOK.md の整合性

- ✅ ワークフローの定義が一致（システム理解と最終確認チェックリストを含む）
- ✅ フェーズ進行のルールが一致
- ✅ ドキュメント更新ルールが一致
- ✅ 原則の適用方針が一致
- ⚠️ AGENTS.md の「絶対に守ること」セクションにシステム理解フェーズが反映されていない

### README.md の整合性

- ⚠️ テンプレートファイル一覧に `00_システム理解.md` と `05_最終確認チェックリスト.md` が記載されていない
- ⚠️ ワークフローチートシートが古い（システム理解と最終確認チェックリストが反映されていない）
- ⚠️ フェーズ説明にシステム理解と最終確認チェックリストが記載されていない
- ⚠️ ディレクトリ構造に `00_システム理解.md` と `05_最終確認チェックリスト.md` が記載されていない

### AI エージェントが正しく機能するための要件

#### 必須要件の確認

1. ✅ **すべての対応は 00\_要求定義.md から開始** - AGENTS*AI_PLAYBOOK.md で明確に定義（既存プロジェクトの場合は 00*システム理解.md から）
2. ✅ **フェーズを飛ばさない** - AGENTS_AI_PLAYBOOK.md で明確に定義（システム理解と最終確認チェックリストを含む）
3. ✅ **ドキュメントと実装を常に同期** - AGENTS_AI_PLAYBOOK.md で明確に定義
4. ✅ **前のステップ・次のステップセクション** - テンプレートに適切に配置
5. ✅ **各ステップで md の全文ドラフトまたは差分パッチを出力** - AGENTS_AI_PLAYBOOK.md で明確に定義

#### フェーズ別チェックリストの確認

- ✅ 00\_システム理解: チェックリストが適切（AGENTS_AI_PLAYBOOK.md に追加済み）
- ✅ 00\_要求定義: チェックリストが適切
- ✅ 01\_要件定義: チェックリストが適切
- ✅ 02\_設計: チェックリストが適切
- ✅ 03\_実装計画: チェックリストが適切
- ✅ 90_issues: チェックリストが適切
- ✅ 実装フェーズ: チェックリストが適切
- ✅ 04_review: チェックリストが適切
- ✅ 05\_最終確認: チェックリストが適切（AGENTS_AI_PLAYBOOK.md に追加済み）

---

## 💡 推奨改善事項

### 1. README.md の更新（重要）

**問題**: README.md にシステム理解と最終確認チェックリストの情報が不足している。

**対応内容**:

1. **テンプレートファイル一覧に追加**:

   - `00_システム理解.md` - システム理解書テンプレート（既存プロジェクト導入時のみ使用）
   - `05_最終確認チェックリスト.md` - 最終確認チェックリストテンプレート（コード対応不可項目がある場合のみ使用）

2. **ワークフローチートシートを更新**:

   - システム理解フェーズ（既存プロジェクト時）を追加
   - 最終確認チェックリストフェーズ（外部設定が必要な場合）を追加

3. **フェーズ説明を更新**:

   - システム理解フェーズの説明を追加
   - 最終確認チェックリストフェーズの説明を追加

4. **ディレクトリ構造を更新**:
   - `00_システム理解.md` を追加
   - `05_最終確認チェックリスト.md` を追加

**優先度**: 高

### 2. AGENTS.md の「絶対に守ること」セクションの更新（重要）

**問題**: 既存プロジェクト導入時のシステム理解フェーズが反映されていない。

**対応内容**:

「絶対に守ること」セクションを以下のように更新：

```markdown
1. **すべての対応は `.workflow/{YYYYMMDD_issue_name}/00_要求定義.md` から始める**（既存プロジェクト導入時は `.workflow/00_システム理解.md` から）
2. **フェーズを飛ばさない（00*システム理解（既存プロジェクト時のみ）→ 00 → 01 → 02 → 03 → 実装 → 04_review → 05*最終確認（外部設定が必要な場合のみ））**
3. **ドキュメントと実装を常に同期させる（変更したら必ず該当 md を更新）**
```

**優先度**: 高

### 3. 00\_要求定義.md テンプレートの「参考資料」セクションの更新（中）

**問題**: 既存プロジェクトの場合の `00_システム理解.md` へのリンクが記載されていない。

**対応内容**:

「参考資料」セクションに、既存プロジェクトの場合の `00_システム理解.md` へのリンクを追加：

```markdown
## 8. 参考資料

### プロジェクトドキュメント

- 既存プロジェクトの場合は、[`00_システム理解.md`](../00_システム理解.md) - システム理解を参照

### その他の参考資料

- {参考資料 1}
- {参考資料 2}
```

**優先度**: 中

### 4. 00\_システム理解.md テンプレートの「前のステップ」「次のステップ」セクションのコメント追加（低）

**問題**: テンプレートに「前のステップ」「次のステップ」セクションが不要である理由が記載されていない。

**対応内容**:

テンプレートの最後に、以下のコメントを追加：

```markdown
---

## 前のステップ

なし（このドキュメントは既存システム理解の最初のステップです）

## 次のステップ

[`00_要求定義.md`](./00_要求定義.md)

**注意**: このドキュメントはプロジェクト全体の理解のため、「前のステップ」「次のステップ」セクションは参考として記載していますが、必須ではありません。
```

**優先度**: 低（現状でも問題なく動作するが、明確性向上のため）

### 5. 04_review.md テンプレートの「次のステップ」セクションの検討（低）

**問題**: 外部設定が必要な場合の `05_最終確認チェックリスト.md` へのリンクを検討する必要がある。

**対応内容**:

`04_review.md` テンプレートの「次のステップ」セクションを以下のように更新：

```markdown
## 12. 前のステップ

このレビュー書は、以下のドキュメントを基に作成されています：

- **前**: [`03_実装計画.md`](./03_実装計画.md) - 実装計画フェーズ

## 13. 次のステップ

このレビュー書の承認後、以下のいずれかのステップに進みます：

- **外部設定が必要な場合**: [`05_最終確認チェックリスト.md`](./05_最終確認チェックリスト.md) - 最終確認フェーズ
- **外部設定が不要な場合**: issue/タスク完了

**注意**: すべてのプロジェクトで最終確認チェックリストが必要とは限りません。コード実装のみで完了するプロジェクトの場合は、このステップをスキップして構いません。
```

**優先度**: 低（現状でも動作するが、明確性向上のため検討）

---

## 📊 結論

### AI が想定通りに正しく機能するか

**✅ はい、概ね問題なく機能します。**

以下の理由から、AI エージェントがこの規約に従って正しく動作できると判断します：

1. **ワークフローの明確性**: フェーズ進行が明確に定義されており、AI が判断しやすい（システム理解と最終確認チェックリストを含む）
2. **テンプレートの一貫性**: すべてのテンプレートで同じフォーマットを使用しており、AI が生成しやすい
3. **明確なルール**: AGENTS_AI_PLAYBOOK.md で機械的に守るべきルールが明確に定義されている
4. **チェックリスト**: フェーズ別チェックリストが整備されており、AI が確認しやすい（システム理解と最終確認チェックリストを含む）
5. **ドキュメント間のリンク**: 前のステップ・次のステップセクションが適切に配置されており、AI がナビゲートしやすい

### 改善が必要な点

- ⚠️ README.md の更新不足: システム理解と最終確認チェックリストの情報が不足 - **要対応（優先度: 高）**
- ⚠️ AGENTS.md の「絶対に守ること」の更新不足: システム理解フェーズが反映されていない - **要対応（優先度: 高）**
- ⚠️ 00*要求定義.md テンプレートの「参考資料」セクション: 既存プロジェクトの場合の `00*システム理解.md` へのリンクが不足 - **要対応（優先度: 中）**
- ⚠️ 00\_システム理解.md テンプレートの「前のステップ」「次のステップ」セクション: コメント追加を検討 - **要検討（優先度: 低）**
- ⚠️ 04_review.md テンプレートの「次のステップ」セクション: 外部設定が必要な場合のリンクを検討 - **要検討（優先度: 低）**

### 総合評価

**評価**: ⭐⭐⭐⭐ (4/5)

システム理解フェーズと最終確認チェックリストの追加により、ワークフローがより包括的になりました。ただし、README.md の更新不足と AGENTS.md の「絶対に守ること」セクションの更新不足により、新規ユーザーや AI エージェントが最新の情報を把握しにくい可能性があります。これらの改善点を対応すれば、より完璧な規約になるでしょう。

---

## 📝 レビュー実施項目

- [x] システム理解フェーズ（00\_システム理解.md）の追加による影響確認
- [x] 最終確認チェックリスト（05\_最終確認チェックリスト.md）の追加による影響確認
- [x] テンプレートファイルの整合性確認
- [x] AGENTS.md と AGENTS_AI_PLAYBOOK.md の整合性確認
- [x] README.md の整合性確認
- [x] テンプレートと規約ドキュメントの整合性確認
- [x] AI が正しく機能するための要件確認
- [x] 一貫性の確認
- [x] 前のステップ・次のステップセクションの確認
- [x] リンクの正確性確認

---

**レビュー実施日**: 2025 年 11 月 23 日 14:42:40
