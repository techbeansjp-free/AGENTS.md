# テンプレートへのテスト戦略とテスト観点追加レビュー

**レビュー実施日**: 2025 年 12 月 6 日  
**レビュー対象**: テンプレートへのテスト戦略・テスト観点セクション追加  
**レビュー担当者**: AI エージェント

---

## レビュー概要

今回の変更では、前回のレビューで指摘された「テンプレートへの反映が必要」という項目に対応し、以下のテンプレートファイルを更新しました：

1. **`02_設計.md`テンプレート**: テスト戦略セクション（6. テスト戦略）を追加
2. **`03_実装計画.md`テンプレート**: 各タスクのテスト観点セクション（2.1.3 テスト観点）を追加、テスト計画セクション（4. テスト計画）を更新

---

## レビュー結果サマリー

### ✅ 良好な点

1. **テンプレートへの適切な追加**: レビューで指摘された内容が適切に反映されている
2. **明確な記述例**: テスト戦略とテスト観点の記述例が具体的で理解しやすい
3. **参照関係の明確化**: `AGENTS_TEST_GUIDELINES.md`への適切な参照が含まれている
4. **セクション番号の整合性**: セクション番号が適切に調整されている
5. **必須項目の明示**: 「重要」マークで必須項目が明確に示されている

### ⚠️ 改善が必要な点

特に指摘事項なし。すべての要件が適切に満たされています。

---

## 詳細レビュー結果

### 1. `02_設計.md`テンプレートの更新

#### ✅ 良好な点

- **テスト戦略セクションの追加**: API 設計の後、UI 設計の前に適切な位置に追加されている
- **テストピラミッドの説明**: 視覚的に理解しやすい形式で記載されている
- **各機能・コンポーネントごとのテストレベル方針**: 表形式で明確に記載されている
- **クリティカルな機能のテスト方針**: 具体的な記述例が含まれている
- **バリデーション系のテスト方針**: サービス層での共通化と網羅的なテストが明記されている
- **参照関係**: `AGENTS_TEST_GUIDELINES.md`への適切な参照が含まれている
- **セクション番号の調整**: UI 設計以降のセクション番号が適切に調整されている（7→8→9→10→11→12）

#### ✅ 確認事項

- セクション番号が適切に調整されている ✅
- リンク形式が正しい（Markdown リンク形式） ✅
- 必須項目が「重要」マークで明示されている ✅
- 記述例が具体的で理解しやすい ✅

---

### 2. `03_実装計画.md`テンプレートの更新

#### ✅ 良好な点

- **各タスクのテスト観点セクションの追加**: 単体テスト仕様の前に適切な位置に追加されている
- **テスト観点の明確化**: 単体テスト、結合/API テスト、E2E/受け入れテスト、バリデーション系が明確に分けられている
- **正常系・異常系の配分**: 「正常系は最小限、異常系・境界値に重点」という方針が明確に記載されている
- **テスト計画セクションの更新**: テストの優先順位、各テストレベルの方針が明確に記載されている
- **参照関係**: `AGENTS_TEST_GUIDELINES.md`への適切な参照が含まれている
- **セクション番号の調整**: 依存関係と見積もりのセクション番号が適切に調整されている（2.1.4→2.1.5→2.1.6）

#### ✅ 確認事項

- セクション番号が適切に調整されている ✅
- リンク形式が正しい（Markdown リンク形式） ✅
- 必須項目が「重要」マークで明示されている ✅
- 記述例が具体的で理解しやすい ✅
- テスト観点と単体テスト仕様の関係が明確 ✅

---

## 整合性チェック

### テンプレートとガイドラインドキュメントの整合性

| 項目                     | テンプレート                        | ガイドライン                | 整合性  |
| ------------------------ | ----------------------------------- | --------------------------- | ------- |
| テスト戦略の定義         | `02_設計.md` 6. テスト戦略          | `AGENTS.md` 3. 設計         | ✅ 適切 |
| テスト観点の定義         | `03_実装計画.md` 2.1.3 テスト観点   | `AGENTS.md` 4. 実装計画     | ✅ 適切 |
| 正常系・異常系の配分     | 両テンプレート                      | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切 |
| バリデーション系のテスト | 両テンプレート                      | `AGENTS_TEST_GUIDELINES.md` | ✅ 適切 |
| 参照関係                 | `AGENTS_TEST_GUIDELINES.md`への参照 | 各ガイドライン              | ✅ 適切 |

### セクション番号の整合性

#### `02_設計.md`テンプレート

| セクション            | 内容             | 整合性  |
| --------------------- | ---------------- | ------- |
| 6. テスト戦略         | 新規追加         | ✅ 適切 |
| 7. UI 設計            | 元の 6 から変更  | ✅ 適切 |
| 8. セキュリティ設計   | 元の 7 から変更  | ✅ 適切 |
| 9. 非機能要件への対応 | 元の 8 から変更  | ✅ 適切 |
| 10. 参考資料          | 元の 9 から変更  | ✅ 適切 |
| 11. 前のステップ      | 元の 10 から変更 | ✅ 適切 |
| 12. 次のステップ      | 元の 11 から変更 | ✅ 適切 |

#### `03_実装計画.md`テンプレート

| セクション           | 内容                | 整合性  |
| -------------------- | ------------------- | ------- |
| 2.1.3 テスト観点     | 新規追加            | ✅ 適切 |
| 2.1.4 単体テスト仕様 | 元の 2.1.3 から変更 | ✅ 適切 |
| 2.1.5 依存関係       | 元の 2.1.4 から変更 | ✅ 適切 |
| 2.1.6 見積もり       | 元の 2.1.5 から変更 | ✅ 適切 |
| 4. テスト計画        | 更新                | ✅ 適切 |

---

## 変更内容の詳細

### 1. `02_設計.md`テンプレートへの追加

#### 追加されたセクション: 6. テスト戦略

- **6.1 テストレベル方針**: テストピラミッドの説明と記述例
- **6.2 各機能・コンポーネントごとのテストレベル方針**: 表形式の記述例
- **6.3 クリティカルな機能のテスト方針**: 具体的な記述例
- **6.4 バリデーション系のテスト方針**: サービス層での共通化と網羅的なテストの記述例
- **参照**: `AGENTS_TEST_GUIDELINES.md`への適切な参照

#### セクション番号の調整

- UI 設計以降のセクション番号を 1 つずつ増やし、整合性を保った

---

### 2. `03_実装計画.md`テンプレートへの追加・更新

#### 追加されたセクション: 2.1.3 テスト観点

- **単体テスト**: 正常系は最小限、異常系・境界値に重点
- **結合/API テスト**: コンポーネント間の契約チェック、代表的なフロー
- **E2E/受け入れテスト**: BDD の Feature/Scenario をそのままテストに
- **バリデーション系**: すべてのバリデーションルール、境界値、エラーメッセージ
- **参照**: `AGENTS_TEST_GUIDELINES.md`への適切な参照

#### 更新されたセクション: 4. テスト計画

- **4.1 テストの優先順位**: クリティカルな機能は厚くテスト
- **4.2 単体テスト**: 正常系は最小限、異常系・境界値に重点
- **4.3 結合/API テスト**: コンポーネント間の契約チェック、代表的なフロー
- **4.4 E2E/受け入れテスト**: BDD の Feature/Scenario をそのままテストに
- **4.5 バリデーション系のテスト**: 網羅的なテスト、境界値、エラーメッセージ
- **参照**: `AGENTS_TEST_GUIDELINES.md`への適切な参照

#### セクション番号の調整

- 単体テスト仕様以降のセクション番号を 1 つずつ増やし、整合性を保った

---

## AI エージェントの作業支援

### テンプレートの改善による効果

1. **迷わない設計**: テスト戦略セクションが明確に定義されているため、設計フェーズで必ずテスト戦略を記載できる
2. **迷わない実装計画**: 各タスクのテスト観点が明確に定義されているため、実装計画フェーズで必ずテスト観点を記載できる
3. **一貫性の確保**: テンプレートに記述例があるため、AI エージェントが一貫した形式でテスト戦略・テスト観点を記載できる
4. **参照の明確化**: `AGENTS_TEST_GUIDELINES.md`への参照が適切に含まれているため、詳細なガイドラインを参照できる

### ハレーション（混乱）の回避

- **必須項目の明示**: 「重要」マークで必須項目が明確に示されている
- **具体的な記述例**: プレースホルダー（`{機能名}`など）と具体的な記述例が含まれている
- **セクション構造の明確化**: セクション番号と構造が明確で、どこに何を記載すべきかがわかる
- **参照関係の明確化**: 関連ドキュメントへの適切な参照が含まれている

---

## 総合評価

### 評価サマリー

- **整合性**: ✅ テンプレートとガイドラインドキュメントの整合性が保たれている
- **完全性**: ✅ レビューで指摘されたすべての項目が適切に反映されている
- **一貫性**: ✅ テンプレート間で一貫した形式と内容が保たれている
- **実用性**: ✅ AI エージェントが迷わず作業できる実用的なテンプレートになっている
- **明確性**: ✅ 記述例が具体的で、理解しやすい

### 優先度別の対応項目

#### 🟢 完了（すべての要件が満たされている）

1. ✅ **テンプレートへの反映**: `02_設計.md`と`03_実装計画.md`のテンプレートに、テスト戦略・テスト観点の記述例を追加
2. ✅ **セクション番号の整合性**: すべてのセクション番号が適切に調整されている
3. ✅ **参照関係の明確化**: `AGENTS_TEST_GUIDELINES.md`への適切な参照が含まれている
4. ✅ **必須項目の明示**: 「重要」マークで必須項目が明確に示されている

---

## 推奨される今後の運用

### 1. テンプレートの使用

- AI エージェントは、新しい issue/タスクを開始する際、必ずこれらのテンプレートを使用する
- テンプレートの記述例を参考に、適切なテスト戦略・テスト観点を記載する

### 2. テンプレートの更新

- テスト戦略やテスト観点に関する方針が変更された場合は、テンプレートも更新する
- テンプレートの更新時は、セクション番号の整合性を確認する

### 3. レビューの実施

- テンプレートを使用して作成されたドキュメントは、テスト戦略・テスト観点が適切に記載されているかレビューする

---

## 参考資料

### レビュー対象ファイル

- [`02_設計.md`](../.workflow/templates/02_設計.md)
- [`03_実装計画.md`](../.workflow/templates/03_実装計画.md)

### 関連レビュー

- [`20251206_230446_テストガイドライン追加と設計計画フェーズへのテスト観点追加レビュー.md`](./20251206_230446_テストガイドライン追加と設計計画フェーズへのテスト観点追加レビュー.md)

### 関連ドキュメント

- [`AGENTS.md`](../AGENTS.md)
- [`AGENTS_AI_PLAYBOOK.md`](../AGENTS_AI_PLAYBOOK.md)
- [`AGENTS_TEST_GUIDELINES.md`](../AGENTS_TEST_GUIDELINES.md)

---

**レビュー実施日**: 2025 年 12 月 6 日 23:57:30  
**レビュー担当者**: AI エージェント
