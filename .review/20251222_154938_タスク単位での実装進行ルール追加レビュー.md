# タスク単位での実装進行ルール追加レビュー

**レビュー日時**: 2025 年 12 月 22 日 15:49:38

**レビュー対象**: `AGENTS_AI_PLAYBOOK.md` へのタスク単位での実装進行ルール追加

---

## レビュー概要

`AGENTS_AI_PLAYBOOK.md` の実装フェーズ（6. 実装フェーズ）に、「タスク単位での実装進行ルール（必須）」を追加しました。この変更により、AI エージェントが各タスクを完了させてから次のタスクに進むことが明確化されました。

---

## 変更内容

### 追加されたルール

**タスク単位での実装進行（必須）**: 実装計画書（`03_実装計画.md`）に記載された各タスクについて、以下の順序で進行する：

1. **タスクの実装**: タスクに記載された実装内容を実装する
2. **追加テストやテストコードの修正の確認**: 実装内容に応じて、追加テストが必要か、既存テストコードの修正が必要かを確認する
3. **テスト実行**: 実装したタスクに関連するすべてのテストを実行する（実行すべきコマンド例と期待される成功条件を示す）
4. **関連ドキュメント更新**: 実装内容、テスト結果、進捗状況を `03_実装計画.md` に反映し、必要に応じて `02_設計.md`/`01_要件定義.md` も更新する
5. **次のタスクへの進行**: **すべてのテストがパスした場合のみ**、次のタスクに進む。テストが失敗した場合は、バグ修正を行い、再度テストを実行する

### 追加されたその他のルール

- **実装環境の確認**: 実装開始前に、必ず開発環境が立ち上がっているか確認すること
- **テスト作成時の規約**: テストを作成する際は、必ず該当リポジトリのテストフォーマット規約に従う
- **テスト実行方法**: テストは必ず docker compose 経由で実行すること
- **フレームワークのベストプラクティスを遵守**: Laravel または Next.js を使用するプロジェクトでは、実装コードの提案時に必ず `AGENTS_FRAMEWORK_BEST_PRACTICES.md` を参照する
- **プロジェクト固有の規約を遵守**: d-pops プロジェクトでは、実装時に必ず `AGENTS_PROJECT_SPECIFIC.md` を参照する

---

## レビュー観点

### 1. 規約の整合性

- ✅ **既存のワークフローとの整合性**: タスク単位での実装進行ルールは、既存の「実装フロー」セクション（`AGENTS.md`）と整合している
- ✅ **フェーズ進行との整合性**: 実装計画フェーズ（03）でタスクを定義し、実装フェーズ（6）で各タスクを順次実装する流れが明確化された
- ✅ **テストファーストとの整合性**: テストファーストの原則と整合しており、各タスクでテストを実行してから次に進むことが明確化された

### 2. 明確性

- ✅ **タスク単位での進行が明確**: 各タスクを完了させてから次のタスクに進むことが明確化された
- ✅ **テスト実行のタイミングが明確**: 各タスクの実装後にテストを実行することが明確化された
- ✅ **ドキュメント更新のタイミングが明確**: 実装内容、テスト結果、進捗状況を `03_実装計画.md` に反映することが明確化された

### 3. 実用性

- ✅ **実装の効率化**: タスク単位で実装・テスト・ドキュメント更新を行うことで、進捗管理が容易になる
- ✅ **品質の向上**: 各タスクでテストを実行してから次に進むことで、バグの早期発見が可能になる
- ✅ **ドキュメントの同期**: 実装内容とドキュメントを常に同期させることで、ドキュメントの整合性が保たれる

### 4. 既存規約との整合性

- ✅ **`AGENTS.md`との整合性**: `AGENTS.md`の「実装フロー」セクションと整合している
- ✅ **`AGENTS_TEST_GUIDELINES.md`との整合性**: テスト作成時の規約への参照が適切に追加されている
- ✅ **`AGENTS_PROJECT_SPECIFIC.md`との整合性**: プロジェクト固有の規約への参照が適切に追加されている
- ✅ **`AGENTS_FRAMEWORK_BEST_PRACTICES.md`との整合性**: フレームワークのベストプラクティスへの参照が適切に追加されている

### 5. AI エージェントの動作

- ✅ **実行ルールの明確化**: AI エージェントが各タスクを完了させてから次のタスクに進むことが明確化された
- ✅ **テスト実行の明確化**: AI エージェントが各タスクの実装後にテストを実行することが明確化された
- ✅ **ドキュメント更新の明確化**: AI エージェントが実装内容、テスト結果、進捗状況を `03_実装計画.md` に反映することが明確化された

---

## 指摘事項

### 軽微な改善提案

1. **実装環境の確認のタイミング**: 実装開始前に実装環境を確認することは明確化されているが、実装中に問題が発生した場合の再確認についても明記すると良い

   - **現状**: 「実装開始前に、必ず開発環境が立ち上がっているか確認すること」と記載
   - **提案**: 「実装開始前、実装中に問題が発生した場合」に確認することを明記

2. **テスト実行の範囲**: 「実装したタスクに関連するすべてのテストを実行する」と記載されているが、プロジェクト全体のテストを実行する場合との区別を明確にすると良い

   - **現状**: 「実装したタスクに関連するすべてのテストを実行する」と記載
   - **提案**: タスク単位でのテスト実行と、プロジェクト全体のテスト実行（レビューフェーズ）の区別を明確化

---

## 改善提案

### 提案 1: 実装環境の確認タイミングの明確化

**現状**:
```
- **実装環境の確認**: 実装開始前に、必ず開発環境が立ち上がっているか確認すること。
```

**提案**:
```
- **実装環境の確認**: 実装開始前に、必ず開発環境が立ち上がっているか確認すること。実装中に問題が発生した場合も、再度確認すること。
```

### 提案 2: テスト実行範囲の明確化

**現状**:
```
3. **テスト実行**: 実装したタスクに関連するすべてのテストを実行する（実行すべきコマンド例と期待される成功条件を示す）
```

**提案**:
```
3. **テスト実行**: 実装したタスクに関連するすべてのテストを実行する（実行すべきコマンド例と期待される成功条件を示す）
   - **注意**: タスク単位でのテスト実行は、実装したタスクに関連するテストのみを実行する。プロジェクト全体のテスト実行は、レビューフェーズ（`04_review.md`）で実施する。
```

---

## 結論

### 総合評価

✅ **承認**: タスク単位での実装進行ルールの追加は、規約の明確化と実用性の向上に寄与する適切な変更です。

### 承認理由

1. **規約の明確化**: タスク単位での実装進行が明確化され、AI エージェントの動作が明確になった
2. **品質の向上**: 各タスクでテストを実行してから次に進むことで、バグの早期発見が可能になる
3. **ドキュメントの同期**: 実装内容とドキュメントを常に同期させることで、ドキュメントの整合性が保たれる
4. **既存規約との整合性**: 既存のワークフローや規約との整合性が保たれている

### 今後の改善

上記の「改善提案」セクションで提案した内容について、必要に応じて今後の更新で反映することを推奨します。

---

## 参考資料

- [`AGENTS_AI_PLAYBOOK.md`](../AGENTS_AI_PLAYBOOK.md) - LLM エージェント運用ルール
- [`AGENTS.md`](../AGENTS.md) - 開発規約の全体像
- [`AGENTS_TEST_GUIDELINES.md`](../AGENTS_TEST_GUIDELINES.md) - テスト作成ガイドライン
- [`AGENTS_PROJECT_SPECIFIC.md`](../AGENTS_PROJECT_SPECIFIC.md) - d-pops プロジェクト固有の規約
- [`AGENTS_FRAMEWORK_BEST_PRACTICES.md`](../AGENTS_FRAMEWORK_BEST_PRACTICES.md) - フレームワークベストプラクティス

---

**レビュー実施者**: AI エージェント（レビュー案の作成）

**最終更新**: 2025 年 12 月 22 日 15:49:38

